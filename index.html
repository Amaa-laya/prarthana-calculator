<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NSB Savings Calculator</title>
  <style>
    body{font-family:Arial, sans-serif;margin:0;padding:20px;background:#f5f5f5;display:flex;justify-content:center;align-items:center;min-height:100vh;color:#000}
    .container{background:#fff;padding:30px;border-radius:15px;box-shadow:0 4px 20px rgba(0,0,0,.1);max-width:900px;width:100%}
    h2{text-align:center;margin-bottom:20px;color:#f58220}
    .language-selector{display:flex;justify-content:flex-end;margin-bottom:10px}
    .tabs{display:flex;justify-content:center;margin-bottom:20px;flex-wrap:wrap}
    .tab{padding:10px 20px;cursor:pointer;background:#e0e0e0;margin:5px;border-radius:8px;color:#000;user-select:none}
    .tab.active{background:#f58220;color:#fff}
    .tab-content{display:none}
    .tab-content.active{display:block}
    form{border:2px solid #f58220;padding:20px;border-radius:12px;margin-bottom:20px;background:#fff}
    label{display:block;margin-bottom:6px;font-weight:600;font-size:14px}
    input,select{width:100%;padding:10px;margin-bottom:15px;border:2px solid #f58220;border-radius:8px;font-size:16px;box-sizing:border-box;color:#000}
    input:focus,select:focus{outline:3px solid #f58220}
    button{padding:10px 15px;background:#f58220;color:#fff;border:none;border-radius:5px;cursor:pointer;margin:8px 8px 0 0;font-weight:600;font-size:15px}
    #result,#result2{margin-top:20px;font-size:18px;color:#1976d2;font-weight:bold;white-space:pre-wrap}
    .sidebar{position:fixed;left:-250px;top:0;height:100%;width:250px;background:#f58220;transition:left .3s ease;padding-top:60px;z-index:1000;color:#fff;font-weight:bold}
    .sidebar.open{left:0}
    .sidebar a{display:block;padding:15px 20px;text-decoration:none;color:#fff;font-size:16px}
    .sidebar a:hover{background:#e06d0f}
    .hamburger{position:fixed;top:20px;left:20px;font-size:30px;cursor:pointer;z-index:1100;color:#f58220;background:#fff;border-radius:8px;padding:5px 10px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
  </style>
</head>
<body>
<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
<div id="sidebar" class="sidebar">
  <a href="#" onclick="loadCalculator('prarthana');closeSidebar();">Prarthana</a>
  <a href="#" onclick="loadCalculator('reality');closeSidebar();">Reality</a>
</div>
<div class="container">
  <div class="language-selector">
    <select class="language" onchange="changeLanguage()">
      <option value="en">English</option><option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option><option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>
  </div>
  <h2 id="main-title">NSB Prarthana Savings Calculator</h2>
  <div class="tabs">
    <div class="tab active" onclick="showTab(event,'required')">ü™ô Required Deposit</div>
    <div class="tab" onclick="showTab(event,'maturity')">üí∞ Maturity Value</div>
  </div>

  <!-- Required Deposit Tab -->
  <div id="required" class="tab-content active">
    <form id="formRequired" onsubmit="event.preventDefault();calculateRequired();">
      <label for="openingDate">Opening Date:</label>
      <input type="date" id="openingDate" required>
      <label for="period">Period:</label>
      <select id="period" required onchange="updateDate('openingDate','period','maturityDate')"></select>
      <label for="maturityDate">Maturity Date:</label>
      <input type="date" id="maturityDate" disabled>
      <label id="targetLabel" for="expectedAmount">Target Maturity Amount (LKR):</label>
      <input type="number" id="expectedAmount" required>
      <label for="interestRate">Interest Rate (% per year):</label>
      <input type="number" id="interestRate" step="0.01" required>
      <button type="submit">Calculate</button><button type="button" onclick="clearAll()">Clear</button><button type="button" onclick="printResult('result')">Print</button>
    </form>
    <div id="result"></div>
  </div>

  <!-- Maturity Value Tab -->
  <div id="maturity" class="tab-content">
    <form id="formMaturity" onsubmit="event.preventDefault();calculateMaturity();">
      <label for="openingDate2">Opening Date:</label>
      <input type="date" id="openingDate2" required>
      <label for="period2">Period:</label>
      <select id="period2" required onchange="updateDate('openingDate2','period2','maturityDate2')"></select>
      <label for="maturityDate2">Maturity Date:</label>
      <input type="date" id="maturityDate2" disabled>
      <label id="amountLabel" for="amountInput">Deposit Amount (LKR):</label>
      <input type="number" id="amountInput" required>
      <label for="interestRate2">Interest Rate (% per year):</label>
      <input type="number" id="interestRate2" step="0.01" required>
      <button type="submit">Calculate</button><button type="button" onclick="clearAll()">Clear</button><button type="button" onclick="printResult('result2')">Print</button>
    </form>
    <div id="result2"></div>
  </div>
</div>

<script>
  let mode='prarthana';
  const periods={prarthana:[3,5,10,15,20],reality:[12,24,36,48,60]};
  const langMap={en:{pr:'NSB Prarthana Savings Calculator',re:'NSB Reality Savings Calculator',target:'Target Maturity Amount (LKR):',deposit:'Deposit Amount (LKR):',install:'Monthly Installment (LKR):'},si:{pr:'NSB ‡∂¥‡∑ä‚Äç‡∂ª‡∑è‡∂ª‡∑ä‡∂Æ‡∂±‡∑è ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∂ª‡∂´ ‡∂ú‡∂´‡∂ö‡∂∫',re:'NSB ‡∂ª‡∑í‡∂∫‡∑ê‡∂Ω‡∑í‡∂ß‡∑í ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∂ª‡∂´ ‡∂ú‡∂´‡∂ö‡∂∫',target:'‡∂Ö‡∂ª‡∂∏‡∑î‡∂´‡∑î ‡∂∏‡∑î‡∂Ø‡∂Ω (‡∂ª‡∑î.)',deposit:'‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î ‡∂∏‡∑î‡∂Ø‡∂Ω (‡∂ª‡∑î.)',install:'‡∂∏‡∑è‡∑É‡∑í‡∂ö ‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î (‡∂ª‡∑î.)'},ta:{pr:'NSB ‡Æ™‡Æ∞‡Ææ‡Æ§‡Øç‡Æ§‡Æ©‡Ææ ‡Æö‡Øá‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç',re:'NSB ‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ≤‡Æø‡Æü‡Øç‡Æü‡Æø ‡Æö‡Øá‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç',target:'‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡Øä‡Æï‡Øà (‡Æ∞‡ØÇ.)',deposit:'‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Øä‡Æï‡Øà (‡Æ∞‡ØÇ.)',install:'‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞ ‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ (‡Æ∞‡ØÇ.)'}};

  function toggleSidebar(){document.getElementById('sidebar').classList.toggle('open');}
  function closeSidebar(){document.getElementById('sidebar').classList.remove('open');}

  function loadCalculator(m){mode=m;document.getElementById('main-title').textContent=langMap[getLang()][m==='prarthana'?'pr':'re'];setPeriods();updateLabels();speakInstruction();}

  function setPeriods(){['period','period2'].forEach((id)=>{const sel=document.getElementById(id);sel.innerHTML='';periods[mode].forEach(p=>{const opt=document.createElement('option');opt.value=p;opt.textContent=mode==='prarthana'?`${p} years`:`${p} months`;sel.appendChild(opt);});});}

  function updateLabels(){const l=langMap[getLang()];document.getElementById('targetLabel').textContent=l.target;document.getElementById('amountLabel').textContent=mode==='prarthana'?l.deposit:l.install;}

  function showTab(e,id){document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));document.getElementById(id).classList.add('active');e.currentTarget.classList.add('active');}

  function updateDate(openId,perId,matId){const op=document.getElementById(openId).value;const p=parseInt(document.getElementById(perId).value);if(!op||!p)return;const d=new Date(op);mode==='prarthana'?d.setFullYear(d.getFullYear()+p):d.setMonth(d.getMonth()+p);document.getElementById(matId).value=d.toISOString().split('T')[0];}

  // CALCULATIONS
  function calculateRequired(){const A=parseFloat(document.getElementById('expectedAmount').value);const r=parseFloat(document.getElementById('interestRate').value)/100;const t=parseInt(document.getElementById('period').value);if(isNaN(A)||isNaN(r)||isNaN(t))return;let out='';if(mode==='prarthana'){const P=A/Math.pow(1+r,t);out=`To receive LKR ${A.toFixed(2)} in ${t} years at ${(r*100).toFixed(2)}%, deposit LKR ${P.toFixed(2)} today.`;}else{const rm=r/12;const factor=(Math.pow(1+rm,t)-1)/rm;const inst=A/factor;out=`To receive LKR ${A.toFixed(2)} in ${t} months at ${(r*100).toFixed(2)}% yearly, deposit LKR ${inst.toFixed(2)} every month.`;}document.getElementById('result').textContent=out;speakText(out);}  

  function calculateMaturity(){const amt=parseFloat(document.getElementById('amountInput').value);const r=parseFloat(document.getElementById('interestRate2').value)/100;const t=parseInt(document.getElementById('period2').value);if(isNaN(amt)||isNaN(r)||isNaN(t))return;let out='';if(mode==='prarthana'){const A=amt*Math.pow(1+r,t);out=`With LKR ${amt.toFixed(2)} deposited for ${t} years at ${(r*100).toFixed(2)}%, you'll receive LKR ${A.toFixed(2)}.`;}else{const rm=r/12;const A=amt*((Math.pow(1+rm,t)-1)/rm);out=`With LKR ${amt.toFixed(2)} monthly for ${t} months at ${(r*100).toFixed(2)}% yearly, you'll receive LKR ${A.toFixed(2)}.`;}document.getElementById('result2').textContent=out;speakText(out);}  

  // UTILITIES
  function clearAll(){document.querySelectorAll('input').forEach(i=>{if(!i.disabled)i.value='';});document.getElementById('result').textContent='';document.getElementById('result2').textContent='';}
  function printResult(id){const c=document.getElementById(id).textContent;if(!c)return;const w=window.open('','_blank');w.document.write(`<html><head><title>Print</title></head><body><pre>${c}</pre></body></html>`);w.document.close();w.print();}
  function speakInstruction(){const msg=new SpeechSynthesisUtterance();msg.lang=getLang();msg.text=mode==='prarthana'?'Prarthana selected. Interest compounds yearly.':'Reality selected. Interest compounds monthly.';speechSynthesis.cancel();speechSynthesis.speak(msg);}  
  function speakText(t){if(!t)return;const m=new SpeechSynthesisUtterance(t);m.lang=getLang();speechSynthesis.cancel();speechSynthesis.speak(m);}  
  function getLang(){return document.querySelector('.language').value;}
  function changeLanguage(){updateLabels();speakInstruction();}

  window.addEventListener('DOMContentLoaded',()=>{loadCalculator('prarthana');});
</script>
</body>
</html>
