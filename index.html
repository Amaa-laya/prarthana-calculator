<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NSB Savings Calculator</title>
<style>
:root{--nsb:#f58220;--grey:#e0e0e0}
*{box-sizing:border-box}body{font-family:Arial,sans-serif;margin:0;background:#f5f5f5;display:flex;justify-content:center;min-height:100vh;padding-top:60px}
.container{background:#fff;padding:30px;border-radius:16px;box-shadow:0 4px 18px rgba(0,0,0,.1);max-width:960px;width:100%}
h2{text-align:center;color:var(--nsb);margin:0 0 22px}
.hamburger{position:fixed;top:16px;left:16px;font-size:28px;background:#fff;color:var(--nsb);padding:6px 12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.15);cursor:pointer;user-select:none;z-index:1100}
.sidebar{position:fixed;left:-260px;top:0;width:260px;height:100%;background:var(--nsb);padding-top:60px;transition:left .3s ease;z-index:1000}
.sidebar.open{left:0}
.sidebar a{display:block;padding:16px 24px;color:#fff;text-decoration:none;font-size:18px;font-weight:bold}
.sidebar a:hover{background:#e06d0f}
.lang{display:flex;justify-content:flex-end;margin-bottom:10px}
.lang select{padding:6px 10px;border:1px solid #ccc;border-radius:6px;font-size:15px}
.tabs{display:flex;justify-content:center;flex-wrap:wrap;margin-bottom:18px}
.tab{background:var(--grey);padding:10px 24px;margin:4px;border-radius:8px;cursor:pointer;transition:.3s}
.tab.active{background:var(--nsb);color:#fff}
.tab-content{display:none}.tab-content.active{display:block}
form{border:2px solid var(--nsb);padding:20px;border-radius:12px}
.grid{display:grid;grid-template-columns:minmax(120px,1fr) 2fr;gap:12px 20px;align-items:center}
@media(max-width:540px){.grid{grid-template-columns:1fr}}
label{font-weight:600}
input,select{width:100%;padding:10px;border:2px solid var(--nsb);border-radius:8px;font-size:15px}
.btns{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
button{background:var(--nsb);color:#fff;border:none;border-radius:5px;padding:9px 14px;font-weight:600;display:inline-flex;gap:6px;cursor:pointer}
button:hover{background:#e06d0f}
.result{margin-top:18px;min-height:70px;font-size:17px;font-weight:bold;color:#1976d2;white-space:pre-wrap}
#speechToggle{position:fixed;bottom:18px;right:18px;width:48px;height:48px;border-radius:50%;font-size:24px;background:var(--nsb);color:#fff;border:none;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15)}
#speechToggle.off{background:#aaa}
</style>
</head>
<body>
<span class="hamburger" onclick="toggleSidebar()">‚ò∞</span>
<nav id="sidebar" class="sidebar">
  <a href="#" onclick="setProduct('prarthana')">Prarthana</a>
  <a href="#" onclick="setProduct('reality')">Reality</a>
</nav>
<div class="container">
  <div class="lang"><select id="lang" onchange="applyLang()"><option value="en">English</option><option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option><option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option></select></div>
  <h2 id="title">NSB Prarthana Savings Calculator</h2>
  <div class="tabs">
    <div id="tabReqBtn" class="tab active" onclick="showTab('req')">ü™ô <span id="txtReq">Required Deposit</span></div>
    <div id="tabMatBtn" class="tab" onclick="showTab('mat')">üí∞ <span id="txtMat">Maturity Value</span></div>
  </div>
  <div id="req" class="tab-content active">
    <form id="formReq" onsubmit="event.preventDefault();calcReq()">
      <div class="grid">
        <label id="lblOpen" for="open">Opening Date:</label><input id="open" type="date" onchange="updateDate()" required>
        <label id="lblPer" for="per">Period:</label><select id="per" onchange="updateDate()"></select>
        <label id="lblMdate" for="mdate">Maturity Date:</label><input id="mdate" type="date" disabled>
        <label id="lblTarget" for="target">Target Amount (LKR):</label><input id="target" type="number" min="0" step="0.01" required>
        <label id="lblRate" for="rate">Interest Rate (%):</label><input id="rate" type="number" min="0" max="100" step="0.01" required>
      </div>
      <div class="btns">
        <button>üßÆ <span id="bCalc1">Calculate</span></button>
        <button type="button" onclick="resetAll()">üßπ <span id="bClr1">Clear</span></button>
        <button type="button" onclick="printRes('res1')">üñ®Ô∏è <span id="bPrt1">Print</span></button>
        <button type="button" onclick="mailRes('res1')">üìß <span id="bMail1">Email</span></button>
      </div>
    </form>
    <div id="res1" class="result"></div>
  </div>
  <div id="mat" class="tab-content">
    <form id="formMat" onsubmit="event.preventDefault();calcMat()">
      <div class="grid">
        <label id="lblOpen2" for="open2">Opening Date:</label><input id="open2" type="date" onchange="updateDate2()" required>
        <label id="lblPer2" for="per2">Period:</label><select id="per2" onchange="updateDate2()"></select>
        <label id="lblMdate2" for="mdate2">Maturity Date:</label><input id="mdate2" type="date" disabled>
        <label id="lblAmt" for="amt">Deposit Amount (LKR):</label><input id="amt" type="number" min="0" step="0.01" required>
        <label id="lblRate2" for="rate2">Interest Rate (%):</label><input id="rate2" type="number" min="0" max="100" step="0.01" required>
      </div>
      <div class="btns">
        <button>üßÆ <span id="bCalc2">Calculate</span></button>
        <button type="button" onclick="resetAll()">üßπ <span id="bClr2">Clear</span></button>
        <button type="button" onclick="printRes('res2')">üñ®Ô∏è <span id="bPrt2">Print</span></button>
        <button type="button" onclick="mailRes('res2')">üìß <span id="bMail2">Email</span></button>
      </div>
    </form>
    <div id="res2" class="result"></div>
  </div>
</div>
<button id="speechToggle" title="Toggle speech" onclick="toggleSpeech()">üîä</button>
<script>
const $ = id => document.getElementById(id);

let prod = 'prarthana';
let speechOn = true;
const langData = {
  en: {
    titlePr: "NSB Prarthana Savings Calculator",
    titleRe: "NSB Reality Savings Calculator",
    req: "Required Deposit", mat: "Maturity Value",
    open: "Opening Date:", per: "Period:", mdate: "Maturity Date:",
    target: "Target Amount (LKR):", amt: "Deposit Amount (LKR):", 
    rate: "Interest Rate (%):", calc: "Calculate", clear: "Clear", 
    print: "Print", email: "Email"
  },
  si: {
    titlePr: "NSB ‡∂¥‡∑ä‚Äç‡∂ª‡∑è‡∂ª‡∑ä‡∂Æ‡∂±‡∑è ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∂ª‡∂´ ‡∂ú‡∂´‡∂ö‡∂∫",
    titleRe: "NSB ‡∂ª‡∑í‡∂∫‡∑ê‡∂Ω‡∑í‡∂ß‡∑í ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∂ª‡∂´ ‡∂ú‡∂´‡∂ö‡∂∫",
    req: "‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î", mat: "‡∂¥‡∑í‡∂ª‡∑í‡∂±‡∑ê‡∂∏‡∑ì‡∂∏‡∑ä ‡∑Ä‡∂ß‡∑í‡∂±‡∑è‡∂ö‡∂∏",
    open: "‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∂ö‡∂ª‡∂± ‡∂Ø‡∑í‡∂±‡∂∫:", per: "‡∂ö‡∑è‡∂Ω‡∂∫:", mdate: "‡∂¥‡∑í‡∂ª‡∑í‡∂±‡∑ê‡∂∏‡∑ì‡∂∏‡∑ä ‡∂Ø‡∑í‡∂±‡∂∫:",
    target: "‡∂Ö‡∂ª‡∂∏‡∑î‡∂´‡∑î ‡∂∏‡∑î‡∂Ø‡∂Ω (‡∂ª‡∑î.):", amt: "‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î ‡∂∏‡∑î‡∂Ø‡∂Ω (‡∂ª‡∑î.):", 
    rate: "‡∂¥‡∑ú‡∂Ω‡∑ì ‡∂Ö‡∂±‡∑î‡∂¥‡∑è‡∂≠‡∂∫ (%):", calc: "‡∂ú‡∂´‡∂±‡∂∫", clear: "‡∂∏‡∂ö‡∂±‡∑ä‡∂±", 
    print: "‡∂∏‡∑î‡∂Ø‡∑ä‚Äç‡∂ª‡∂´‡∂∫", email: "‡∂ä-‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω"
  },
  ta: {
    titlePr: "NSB ‡Æ™‡Æ∞‡Ææ‡Æ§‡Øç‡Æ§‡Æ©‡Ææ ‡Æö‡Øá‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç",
    titleRe: "NSB ‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ≤‡Æø‡Æü‡Øç‡Æü‡Æø ‡Æö‡Øá‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç",
    req: "‡Æ§‡Øá‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ", mat: "‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÅ",
    open: "‡Æ§‡Æø‡Æ±‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ§‡Æø:", per: "‡Æï‡Ææ‡Æ≤‡ÆÆ‡Øç:", mdate: "‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ ‡Æ§‡Øá‡Æ§‡Æø:",
    target: "‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡Øä‡Æï‡Øà (‡Æ∞‡ØÇ.):", amt: "‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Øä‡Æï‡Øà (‡Æ∞‡ØÇ.):",
    rate: "‡Æµ‡Æü‡Øç‡Æü‡Æø ‡Æµ‡Æø‡Æï‡Æø‡Æ§‡ÆÆ‡Øç (%):", calc: "‡Æï‡Æ£‡Æï‡Øç‡Æï‡Æø‡Æü‡ØÅ", clear: "‡ÆÖ‡Æ¥‡Æø",
    print: "‡ÆÖ‡Æö‡Øç‡Æö‡ØÅ", email: "‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç"
  }
};
const Y = [3,5,10,15,20];
const M = [12,24,36,48,60];

function curLang() {
  return $("lang").value || "en";
}
function applyLang() {
  const t = langData[curLang()];
  $("title").textContent = prod === 'prarthana' ? t.titlePr : t.titleRe;
  document.title = $("title").textContent;
  $("txtReq").textContent = t.req;
  $("txtMat").textContent = t.mat;
  $("lblOpen").textContent = t.open;
  $("lblPer").textContent = t.per;
  $("lblMdate").textContent = t.mdate;
  $("lblTarget").textContent = t.target;
  $("lblRate").textContent = t.rate;
  $("lblOpen2").textContent = t.open;
  $("lblPer2").textContent = t.per;
  $("lblMdate2").textContent = t.mdate;
  $("lblAmt").textContent = t.amt;
  $("lblRate2").textContent = t.rate;
  $("bCalc1").textContent = t.calc;
  $("bClr1").textContent = t.clear;
  $("bPrt1").textContent = t.print;
  $("bMail1").textContent = t.email;
  $("bCalc2").textContent = t.calc;
  $("bClr2").textContent = t.clear;
  $("bPrt2").textContent = t.print;
  $("bMail2").textContent = t.email;
  loadPeriods();
}
function toggleSidebar() {
  $("sidebar").classList.toggle("open");
}
function setProduct(p) {
  prod = p;
  applyLang();
  loadPeriods();
  resetAll();
  showTab("req");
}
function loadPeriods() {
  const opts = prod === "prarthana" ? Y : M;
  const label = prod === "prarthana" ? " years" : " months";
  [$("per"), $("per2")].forEach(select => {
    select.innerHTML = "";
    opts.forEach(val => {
      const opt = document.createElement("option");
      opt.value = val;
      opt.textContent = val + label;
      select.appendChild(opt);
    });
  });
  updateDate(); updateDate2();
}
function updateDate() {
  const d = new Date($("open").value);
  const p = parseInt($("per").value || 0);
  if (!d.getTime() || !p) return $("mdate").value = "";
  if (prod === "prarthana") d.setFullYear(d.getFullYear() + p);
  else d.setMonth(d.getMonth() + p);
  $("mdate").value = d.toISOString().slice(0,10);
}
function updateDate2() {
  const d = new Date($("open2").value);
  const p = parseInt($("per2").value || 0);
  if (!d.getTime() || !p) return $("mdate2").value = "";
  if (prod === "prarthana") d.setFullYear(d.getFullYear() + p);
  else d.setMonth(d.getMonth() + p);
  $("mdate2").value = d.toISOString().slice(0,10);
}
function showTab(tab) {
  ["req","mat"].forEach(t => {
    $(t).classList.toggle("active", t===tab);
    $("tab" + (t==="req"?"Req":"Mat") + "Btn").classList.toggle("active", t===tab);
  });
  $("res1").textContent = $("res2").textContent = "";
}
function resetAll() {
  ["formReq","formMat"].forEach(id => $(id).reset());
  $("mdate").value = $("mdate2").value = "";
  $("res1").textContent = $("res2").textContent = "";
}
function printRes(id) {
  const text = $(id).textContent;
  if (!text) return alert("Nothing to print.");
  const win = window.open();
  win.document.write(`<pre>${text}</pre>`);
  win.print();
  win.close();
}
function mailRes(id) {
  const txt = $(id).textContent;
  if (!txt) return alert("Nothing to email.");
  const subj = encodeURIComponent("NSB Savings Calculator Result");
  const body = encodeURIComponent(txt);
  window.location.href = `mailto:?subject=${subj}&body=${body}`;
}
function calcReq() {
  const open = new Date($("open").value);
  const per = parseInt($("per").value);
  const rate = parseFloat($("rate").value)/100;
  const target = parseFloat($("target").value);
  if (!open.getTime() || isNaN(per) || isNaN(rate) || isNaN(target)) return alert("Fill all fields.");

  let principal;
  if (prod === "prarthana") {
    principal = target / Math.pow(1 + rate, per);
  } else {
    const months = per;
    principal = target / Math.pow(1 + rate, months);
  }

  const maturity = $("mdate").value || "N/A";
  const res = `Opening Date: ${$("open").value}
Maturity Date: ${maturity}
Period: ${per} ${prod === 'prarthana' ? 'years' : 'months'}
Target: LKR ${target.toFixed(2)}
Interest Rate: ${rate*100}% ${prod === 'prarthana' ? 'per year' : 'per month'}
Required Deposit: LKR ${principal.toFixed(2)}`;
  $("res1").textContent = res;
  speak(res);
}
function calcMat() {
  const open = new Date($("open2").value);
  const per = parseInt($("per2").value);
  const rate = parseFloat($("rate2").value)/100;
  const deposit = parseFloat($("amt").value);
  if (!open.getTime() || isNaN(per) || isNaN(rate) || isNaN(deposit)) return alert("Fill all fields.");

  let value = 0;
  if (prod === "prarthana") {
    value = deposit * Math.pow(1 + rate, per);
  } else {
    value = deposit * (Math.pow(1 + rate, per) - 1) / rate;
    const start = new Date(open);
    const end = new Date(start);
    end.setMonth(end.getMonth() + per);
    const totalDays = (end - start) / (1000 * 3600 * 24);
    const extra = (totalDays % 30) / 30; // partial month
    value *= 1 + rate * extra;
  }

  const maturity = $("mdate2").value || "N/A";
  const res = `Opening Date: ${$("open2").value}
Maturity Date: ${maturity}
Period: ${per} ${prod === 'prarthana' ? 'years' : 'months'}
Deposit Amount: LKR ${deposit.toFixed(2)}
Interest Rate: ${rate*100}% ${prod === 'prarthana' ? 'per year' : 'per month'}
Maturity Value: LKR ${value.toFixed(2)}`;
  $("res2").textContent = res;
  speak(res);
}
function toggleSpeech() {
  speechOn = !speechOn;
  $("speechToggle").classList.toggle("off", !speechOn);
}
function speak(msg) {
  if (!speechOn || !("speechSynthesis" in window)) return;
  const u = new SpeechSynthesisUtterance(msg);
  const lang = curLang();
  u.lang = lang === "si" ? "si-LK" : lang === "ta" ? "ta-IN" : "en-US";
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

setProduct("prarthana");
applyLang();
showTab("req");
</script>

</body>
</html>
