<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NSB Savings Calculator</title>
  <style>
    body{font-family:Arial,sans-serif;margin:0;padding:20px;background:#f5f5f5;display:flex;justify-content:center;align-items:center;min-height:100vh;color:#000}
    .container{background:#fff;padding:30px;border-radius:15px;box-shadow:0 4px 20px rgba(0,0,0,.1);max-width:920px;width:100%}
    h2{text-align:center;margin-bottom:20px;color:#f58220}
    .language-selector{display:flex;justify-content:flex-end;margin-bottom:10px}
    .tabs{display:flex;justify-content:center;margin-bottom:20px;flex-wrap:wrap}
    .tab{padding:10px 20px;cursor:pointer;background:#e0e0e0;margin:5px;border-radius:8px;color:#000;user-select:none;white-space:nowrap}
    .tab.active{background:#f58220;color:#fff}
    .tab-content{display:none}
    .tab-content.active{display:block}
    form{border:2px solid #f58220;padding:20px;border-radius:12px;margin-bottom:20px;background:#fff}
    label{display:block;margin-bottom:6px;font-weight:600;font-size:14px}
    input,select{width:100%;padding:10px;margin-bottom:15px;border:2px solid #f58220;border-radius:8px;font-size:16px;box-sizing:border-box;color:#000}
    input:focus,select:focus{outline:3px solid #f58220}
    button{padding:10px 15px;background:#f58220;color:#fff;border:none;border-radius:5px;cursor:pointer;margin:8px 8px 0 0;font-weight:600;font-size:15px;display:inline-flex;align-items:center;gap:6px}
    #result,#result2{margin-top:20px;font-size:18px;color:#1976d2;font-weight:bold;white-space:pre-wrap}
    .sidebar{position:fixed;left:-250px;top:0;height:100%;width:250px;background:#f58220;transition:left .3s ease;padding-top:60px;z-index:1000;color:#fff;font-weight:bold}
    .sidebar.open{left:0}
    .sidebar a{display:block;padding:15px 20px;text-decoration:none;color:#fff;font-size:16px}
    .sidebar a:hover{background:#e06d0f}
    .hamburger{position:fixed;top:20px;left:20px;font-size:30px;cursor:pointer;z-index:1100;color:#f58220;background:#fff;border-radius:8px;padding:5px 10px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
  </style>
</head>
<body>
<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
<div id="sidebar" class="sidebar">
  <a href="#" onclick="loadCalculator('prarthana');closeSidebar();">Prarthana</a>
  <a href="#" onclick="loadCalculator('reality');closeSidebar();">Reality</a>
</div>
<div class="container">
  <div class="language-selector">
    <select class="language" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>
  </div>
  <h2 id="main-title">NSB Prarthana Savings Calculator</h2>
  <div class="tabs">
    <div class="tab active" onclick="showTab(event,'required')">ü™ô <span id="tabReq">Required Deposit</span></div>
    <div class="tab" onclick="showTab(event,'maturity')">üí∞ <span id="tabMat">Maturity Value</span></div>
  </div>

  <!-- Required Deposit Tab -->
  <div id="required" class="tab-content active">
    <form id="formRequired" onsubmit="event.preventDefault();calculateRequired();">
      <label for="openingDate" id="lblOpen">Opening Date:</label>
      <input type="date" id="openingDate" required onchange="updateMaturityDate()">
      <label for="period" id="lblPeriod">Period (Years):</label>
      <select id="period" required onchange="updateMaturityDate()"></select>
      <label for="maturityDate" id="lblMatDate">Maturity Date:</label>
      <input type="date" id="maturityDate" disabled>
      <label id="targetLabel" for="expectedAmount">Target Maturity Amount (LKR):</label>
      <input type="number" id="expectedAmount" min="0" step="0.01" required>
      <label for="interestRate" id="lblRate">Interest Rate (% per year):</label>
      <input type="number" id="interestRate" min="0" step="0.01" required>
      <button type="submit">üßÆ <span id="btnCalc1">Calculate</span></button>
      <button type="button" onclick="clearAll()">üßπ <span id="btnClear1">Clear</span></button>
      <button type="button" onclick="printResult('result')">üñ®Ô∏è <span id="btnPrint1">Print</span></button>
      <button type="button" onclick="emailResult('result')">üìß <span id="btnEmail1">Email</span></button>
    </form>
    <div id="result"></div>
  </div>

  <!-- Maturity Value Tab -->
  <div id="maturity" class="tab-content">
    <form id="formMaturity" onsubmit="event.preventDefault();calculateMaturity();">
      <label for="openingDate2" id="lblOpen2">Opening Date:</label>
      <input type="date" id="openingDate2" required onchange="updateMaturityDateReality()">
      <label for="period2" id="lblPeriod2">Period (Months):</label>
      <select id="period2" required onchange="updateMaturityDateReality()"></select>
      <label for="maturityDate2" id="lblMatDate2">Maturity Date:</label>
      <input type="date" id="maturityDate2" disabled>
      <label id="amountLabel" for="amountInput">Monthly Installment (LKR):</label>
      <input type="number" id="amountInput" min="0" step="0.01" required>
      <label for="interestRate2" id="lblRate2">Interest Rate (% per year):</label>
      <input type="number" id="interestRate2" min="0" step="0.01" required>
      <button type="submit">üßÆ <span id="btnCalc2">Calculate</span></button>
      <button type="button" onclick="clearAll()">üßπ <span id="btnClear2">Clear</span></button>
      <button type="button" onclick="printResult('result2')">üñ®Ô∏è <span id="btnPrint2">Print</span></button>
      <button type="button" onclick="emailResult('result2')">üìß <span id="btnEmail2">Email</span></button>
    </form>
    <div id="result2"></div>
  </div>
</div>

<script>
  let mode = 'prarthana';
  const periods = { prarthana: [3, 5, 10, 15, 20], reality: [12, 24, 36, 48, 60] };
  const dict = {
    en: {
      titlePr: 'NSB Prarthana Savings Calculator',
      titleRe: 'NSB Reality Savings Calculator',
      req: 'Required Deposit',
      mat: 'Maturity Value',
      target: 'Target Maturity Amount (LKR):',
      deposit: 'Deposit Amount (LKR):',
      install: 'Monthly Installment (LKR):',
      calc: 'Calculate',
      clear: 'Clear',
      print: 'Print',
      email: 'Email',
      open: 'Opening Date:',
      period: 'Period:',
      matDate: 'Maturity Date:',
      rate: 'Interest Rate (% per year):'
    },
    si: {
      titlePr: 'NSB ‡∂¥‡∑ä‚Äç‡∂ª‡∑è‡∂ª‡∑ä‡∂Æ‡∂±‡∑è ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∂ª‡∂´ ‡∂ú‡∂´‡∂ö‡∂∫',
      titleRe: 'NSB ‡∂ª‡∑í‡∂∫‡∑ê‡∂Ω‡∑í‡∂ß‡∑í ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∂ª‡∂´ ‡∂ú‡∂´‡∂ö‡∂∫',
      req: '‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î',
      mat: '‡∂¥‡∑í‡∂ª‡∑í‡∂±‡∑ê‡∂∏‡∑ì‡∂∏‡∑ä ‡∑Ä‡∂ß‡∑í‡∂±‡∑è‡∂ö‡∂∏',
      target: '‡∂Ö‡∂ª‡∂∏‡∑î‡∂´‡∑î ‡∂∏‡∑î‡∂Ø‡∂Ω (‡∂ª‡∑î.):',
      deposit: '‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î ‡∂∏‡∑î‡∂Ø‡∂Ω (‡∂ª‡∑î.):',
      install: '‡∂∏‡∑è‡∑É‡∑í‡∂ö ‡∂≠‡∑ê‡∂±‡∑ä‡∂¥‡∂≠‡∑î (‡∂ª‡∑î.):',
      calc: '‡∂ú‡∂´‡∂±‡∂∫',
      clear: '‡∂ö‡∑Ö‡∂Ω',
      print: '‡∂∏‡∑î‡∂Ø‡∑ä‚Äç‡∂ª‡∂´‡∂∫',
      email: '‡∂ä-‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω',
      open: '‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∂ö‡∂ª‡∂± ‡∂Ø‡∑í‡∂±‡∂∫:',
      period: '‡∂ö‡∑è‡∂Ω‡∂∫:',
      matDate: '‡∂¥‡∑í‡∂ª‡∑í‡∂±‡∑ê‡∂∏‡∑ì‡∂∏‡∑ä ‡∂Ø‡∑í‡∂±‡∂∫:',
      rate: '‡∂¥‡∑ú‡∂Ω‡∑ì ‡∂Ö‡∂±‡∑î‡∂¥‡∑è‡∂≠‡∂∫ (% ‡∑Ä‡∑É‡∂ª)'
    },
    ta: {
      titlePr: 'NSB ‡Æ™‡Æ∞‡Ææ‡Æ§‡Øç‡Æ§‡Æ©‡Ææ ‡Æö‡Øá‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç',
      titleRe: 'NSB ‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ≤‡Æø‡Æü‡Øç‡Æü‡Æø ‡Æö‡Øá‡ÆÆ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Øç',
      req: '‡Æ§‡Øá‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ',
      mat: '‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÅ',
      target: '‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡Øä‡Æï‡Øà (‡Æ∞‡ØÇ.)',
      deposit: '‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Øä‡Æï‡Øà (‡Æ∞‡ØÇ.)',
      install: '‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞ ‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ (‡Æ∞‡ØÇ.)',
      calc: '‡Æï‡Æ£‡Æï‡Øç‡Æï‡Æø‡Æü‡ØÅ',
      clear: '‡ÆÖ‡Æ¥‡Æø',
      print: '‡ÆÖ‡Æö‡Øç‡Æö‡ØÅ',
      email: '‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç',
      open: '‡Æ§‡Æø‡Æ±‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ§‡Æø:',
      period: '‡Æï‡Ææ‡Æ≤‡ÆÆ‡Øç:',
      matDate: '‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ ‡Æ§‡Øá‡Æ§‡Æø:',
      rate: '‡Æµ‡Æü‡Øç‡Æü‡Æø ‡Æµ‡Æø‡Æï‡Æø‡Æ§‡ÆÆ‡Øç (%/‡ÆÜ‡Æ£‡Øç‡Æü‡ØÅ)'
    }
  };

  function $(id) { return document.getElementById(id); }

  function toggleSidebar() {
    $('sidebar').classList.toggle('open');
  }
  function closeSidebar() {
    $('sidebar').classList.remove('open');
  }

  function showTab(event, id) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    $(id).classList.add('active');
    if (event) event.currentTarget.classList.add('active');
  }

  function loadCalculator(calcMode) {
    mode = calcMode;
    populatePeriods();
    updateLabels();
    clearAll();
    // Show Prarthana tab by default on load mode change
    showTab(null, 'required');
    // Update main title
    $('main-title').textContent = mode === 'prarthana' ? dict[getLang()].titlePr : dict[getLang()].titleRe;
  }

  function populatePeriods() {
    const sel1 = $('period');
    const sel2 = $('period2');
    sel1.innerHTML = '';
    sel2.innerHTML = '';
    periods[mode].forEach(v => {
      const option1 = document.createElement('option');
      option1.value = v;
      option1.textContent = mode === 'prarthana' ? `${v} years` : `${v} months`;
      sel1.appendChild(option1);

      const option2 = option1.cloneNode(true);
      sel2.appendChild(option2);
    });
  }

  function updateLabels() {
    const l = dict[getLang()];
    $('tabReq').textContent = l.req;
    $('tabMat').textContent = l.mat;
    $('main-title').textContent = mode === 'prarthana' ? l.titlePr : l.titleRe;
    $('targetLabel').textContent = l.target;
    $('amountLabel').textContent = mode === 'prarthana' ? l.deposit : l.install;
    $('lblOpen').textContent = l.open;
    $('lblOpen2').textContent = l.open;
    $('lblPeriod').textContent = mode === 'prarthana' ? l.period + ' (Years):' : l.period + ' (Months):';
    $('lblPeriod2').textContent = mode === 'prarthana' ? l.period + ' (Years):' : l.period + ' (Months):';
    $('lblMatDate').textContent = l.matDate;
    $('lblMatDate2').textContent = l.matDate;
    $('lblRate').textContent = l.rate;
    $('lblRate2').textContent = l.rate;
    $('btnCalc1').textContent = l.calc;
    $('btnCalc2').textContent = l.calc;
    $('btnClear1').textContent = l.clear;
    $('btnClear2').textContent = l.clear;
    $('btnPrint1').textContent = l.print;
    $('btnPrint2').textContent = l.print;
    $('btnEmail1').textContent = l.email;
    $('btnEmail2').textContent = l.email;
  }

  function getLang() {
    return document.querySelector('.language').value || 'en';
  }

  function changeLanguage() {
    updateLabels();
  }

  // Prarthana maturity date = opening date + period years
  function updateMaturityDate() {
    const opening = $('openingDate').value;
    const years = parseInt($('period').value);
    if (opening && years) {
      const dt = new Date(opening);
      dt.setFullYear(dt.getFullYear() + years);
      $('maturityDate').value = dt.toISOString().split('T')[0];
    } else {
      $('maturityDate').value = '';
    }
  }

  // Reality maturity date = opening date + period months
  function updateMaturityDateReality() {
    const opening = $('openingDate2').value;
    const months = parseInt($('period2').value);
    if (opening && months) {
      const dt = new Date(opening);
      dt.setMonth(dt.getMonth() + months);
      $('maturityDate2').value = dt.toISOString().split('T')[0];
    } else {
      $('maturityDate2').value = '';
    }
  }

  // Prarthana calculation - Required Deposit to get target maturity amount after years, yearly interest
  function calculateRequired() {
    const A = parseFloat($('expectedAmount').value);
    const r = parseFloat($('interestRate').value) / 100;
    const t = parseInt($('period').value);
    if (isNaN(A) || isNaN(r) || isNaN(t)) {
      alert('Please enter valid values');
      return;
    }
    // Present Value = Future Value / (1 + r)^t
    let P = A / Math.pow(1 + r, t);
    P = Math.round(P * 100) / 100;
    const l = dict[getLang()];
    const result = `${l.req}: ${P.toLocaleString(undefined, {minimumFractionDigits:2,maximumFractionDigits:2})}\n` +
      `${l.target} ${A.toLocaleString(undefined, {minimumFractionDigits:2,maximumFractionDigits:2})}\n` +
      `${l.period} ${t} years\n` +
      `${l.rate} ${ (r * 100).toFixed(2)}%\n` +
      `${l.matDate} ${$('maturityDate').value}`;
    $('result').textContent = result;
  }

  // Reality calculation - maturity amount for monthly installments with monthly compounding
  function calculateMaturity() {
    const P = parseFloat($('amountInput').value); // monthly installment
    const r = parseFloat($('interestRate2').value) / 100;
    const months = parseInt($('period2').value);
    if (isNaN(P) || isNaN(r) || isNaN(months)) {
      alert('Please enter valid values');
      return;
    }
    // Formula for maturity amount with monthly installment and monthly compounding:
    // A = P * [ ((1 + i)^n - 1) / i ] where i = monthly interest rate, n = months
    const i = r / 12;
    const A = P * ( (Math.pow(1 + i, months) - 1) / i );
    const l = dict[getLang()];
    const result = `${l.install}: ${P.toLocaleString(undefined, {minimumFractionDigits:2,maximumFractionDigits:2})}\n` +
      `${l.period} ${months} months\n` +
      `${l.rate} ${(r * 100).toFixed(2)}%\n` +
      `${l.mat}: ${A.toLocaleString(undefined, {minimumFractionDigits:2,maximumFractionDigits:2})}\n` +
      `${l.matDate} ${$('maturityDate2').value}`;
    $('result2').textContent = result;
  }

  // Clear all inputs and results in both forms
  function clearAll() {
    ['openingDate','period','maturityDate','expectedAmount','interestRate'].forEach(id => {
      if ($(id)) $(id).value = '';
    });
    ['openingDate2','period2','maturityDate2','amountInput','interestRate2'].forEach(id => {
      if ($(id)) $(id).value = '';
    });
    $('result').textContent = '';
    $('result2').textContent = '';
  }

 
  // Print result of a div by id
  function printResult(id) {
    const content = $(id).textContent || 'No result to print.';
    const printWindow = window.open('', '', 'width=600,height=400');
    printWindow.document.write('<pre style="font-family: Arial; font-size:16px;">' + content + '</pre>');
    printWindow.document.close();
    printWindow.focus();
    printWindow.print();
    printWindow.close();
  }

  // Email result via mailto link
  function emailResult(id) {
    const content = $(id).textContent;
    if (!content) {
      alert('Nothing to email!');
      return;
    }
    const subject = encodeURIComponent('NSB Savings Calculator Result');
    const body = encodeURIComponent(content);
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
  }

  // Initialize the page
  window.onload = () => {
    loadCalculator('prarthana');  // Default to prarthana calculator
    updateLabels();

    // Populate period selects on load
    populatePeriods();

    // Update maturity dates when periods change
    $('period').addEventListener('change', updateMaturityDate);
    $('openingDate').addEventListener('change', updateMaturityDate);
    $('period2').addEventListener('change', updateMaturityDateReality);
    $('openingDate2').addEventListener('change', updateMaturityDateReality);

    // Language selector change listener
    document.querySelector('.language').addEventListener('change', changeLanguage);
  };
</script>
</body>
</html>
