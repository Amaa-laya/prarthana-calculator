<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NSB Prarthana Savings Calculator</title>
  <style>
    /* [Same CSS as provided above] */
  </style>
</head>
<body>
  <!-- Hamburger icon -->
  <div id="hamburger" aria-label="Toggle menu" role="button" tabindex="0">
    <div></div><div></div><div></div>
  </div>

  <!-- Sidebar -->
  <nav id="sidebar" aria-label="Main navigation">
    <button id="prarthanaBtn" class="active">Prarthana Savings</button>
    <button id="realityBtn">Reality Savings</button>
  </nav>

  <!-- Main Content -->
  <div class="container" id="mainContainer">
    <div class="language-selector">
      <select class="language" onchange="changeLanguage(this.value)">
        <option value="en">English</option>
        <option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option>
        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
      </select>
    </div>
    <h2 data-i18n="title">NSB Prarthana Savings Calculator</h2>
    <div class="tabs">
      <div class="tab active" onclick="showTab('tab1', this)" data-i18n="tab1">ü™ô Required Deposit</div>
      <div class="tab" onclick="showTab('tab2', this)" data-i18n="tab2">üí∞ Maturity Value</div>
    </div>

    <div id="tab1" class="tab-content active">
      <form id="form1" onsubmit="event.preventDefault(); calculateDeposit();">
        <label for="openingDate" data-i18n="labelOpeningDate">Opening Date:</label>
        <input type="date" id="openingDate" required />

        <label for="period" data-i18n="labelPeriod">Maturity Period (Years):</label>
        <select id="period" required>
          <option value="" disabled selected data-i18n="selectMaturityPeriod">Select Maturity Period</option>
          <option value="3">3 years</option>
          <option value="5">5 years</option>
          <option value="10">10 years</option>
          <option value="15">15 years</option>
          <option value="20">20 years</option>
        </select>

        <label for="maturityDate" data-i18n="labelMaturityDate">Maturity Date:</label>
        <input type="date" id="maturityDate" disabled />

        <label for="expectedAmount" data-i18n="labelExpectedAmount">Expected Maturity Amount (LKR):</label>
        <input type="number" id="expectedAmount" placeholder="e.g. 100000" required />

        <label for="interestRate" data-i18n="labelInterestRate">Interest Rate (%):</label>
        <input type="number" id="interestRate" placeholder="e.g. 7.5" step="0.01" required />

        <button type="submit" data-i18n="calculate">Calculate Deposit</button>
        <button type="button" onclick="printResult('tab1')" data-i18n="print">üñ®Ô∏è Print</button>
        <button type="button" onclick="saveToLocal('result')" data-i18n="save">üíæ Save</button>
      </form>
      <div id="result"></div>
    </div>

    <div id="tab2" class="tab-content">
      <form id="form2" onsubmit="event.preventDefault(); calculateMaturity();">
        <label for="openingDate2" data-i18n="labelOpeningDate">Opening Date:</label>
        <input type="date" id="openingDate2" required />

        <label for="period2" data-i18n="labelPeriod">Maturity Period (Years):</label>
        <select id="period2" required>
          <option value="" disabled selected data-i18n="selectMaturityPeriod">Select Maturity Period</option>
          <option value="3">3 years</option>
          <option value="5">5 years</option>
          <option value="10">10 years</option>
          <option value="15">15 years</option>
          <option value="20">20 years</option>
        </select>

        <label for="maturityDate2" data-i18n="labelMaturityDate">Maturity Date:</label>
        <input type="date" id="maturityDate2" disabled />

        <label for="depositAmount" data-i18n="labelDepositAmount">Deposit Amount (LKR):</label>
        <input type="number" id="depositAmount" placeholder="e.g. 50000" required />

        <label for="interestRate2" data-i18n="labelInterestRate">Interest Rate (%):</label>
        <input type="number" id="interestRate2" placeholder="e.g. 7.5" step="0.01" required />

        <button type="submit" data-i18n="calculate">Calculate Maturity</button>
        <button type="button" onclick="printResult('tab2')" data-i18n="print">üñ®Ô∏è Print</button>
        <button type="button" onclick="saveToLocal('result2')" data-i18n="save">üíæ Save</button>
      </form>
      <div id="result2"></div>
    </div>
  </div>

  <script>
    const hamburger = document.getElementById('hamburger');
    const sidebar = document.getElementById('sidebar');
    const container = document.getElementById('mainContainer');

    hamburger.addEventListener('click', () => {
      sidebar.classList.toggle('active');
      container.classList.toggle('shifted');
    });
    hamburger.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        hamburger.click();
      }
    });

    const prarthanaBtn = document.getElementById('prarthanaBtn');
    const realityBtn = document.getElementById('realityBtn');
    prarthanaBtn.addEventListener('click', () => {
      prarthanaBtn.classList.add('active');
      realityBtn.classList.remove('active');
      alert('Show Prarthana Savings form (to be implemented)');
      sidebar.classList.remove('active');
      container.classList.remove('shifted');
    });
    realityBtn.addEventListener('click', () => {
      realityBtn.classList.add('active');
      prarthanaBtn.classList.remove('active');
      alert('Show Reality Savings form (to be implemented)');
      sidebar.classList.remove('active');
      container.classList.remove('shifted');
    });

    function showTab(tabId, tabElement) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      tabElement.classList.add('active');
    }

    function calculateMaturityDate(openingId, periodId, maturityId) {
      const openingDate = new Date(document.getElementById(openingId).value);
      const years = parseInt(document.getElementById(periodId).value);
      if (!isNaN(openingDate.getTime()) && years) {
        openingDate.setFullYear(openingDate.getFullYear() + years);
        document.getElementById(maturityId).value = openingDate.toISOString().split('T')[0];
      } else {
        document.getElementById(maturityId).value = "";
      }
    }

    document.getElementById('period').addEventListener('change', () =>
      calculateMaturityDate('openingDate', 'period', 'maturityDate'));
    document.getElementById('period2').addEventListener('change', () =>
      calculateMaturityDate('openingDate2', 'period2', 'maturityDate2'));

    function calculateDeposit() {
      const rate = parseFloat(document.getElementById("interestRate").value) / 100;
      const years = parseInt(document.getElementById("period").value);
      const expected = parseFloat(document.getElementById("expectedAmount").value);
      if (isNaN(rate) || isNaN(years) || isNaN(expected)) {
        alert('Please calculate first.');
        return;
      }
      const deposit = expected / Math.pow(1 + rate, years);
      const resultText = `Required Deposit: Rs. ${deposit.toFixed(2)}`;
      document.getElementById("result").innerText = resultText;
    }

    function calculateMaturity() {
      const rate = parseFloat(document.getElementById("interestRate2").value) / 100;
      const years = parseInt(document.getElementById("period2").value);
      const deposit = parseFloat(document.getElementById("depositAmount").value);
      if (isNaN(rate) || isNaN(years) || isNaN(deposit)) {
        alert('Please calculate first.');
        return;
      }
      const maturity = deposit * Math.pow(1 + rate, years);
      const resultText = `Maturity Value: Rs. ${maturity.toFixed(2)}`;
      document.getElementById("result2").innerText = resultText;
    }

    function printResult(tabId) {
      const content = document.getElementById(tabId === 'tab1' ? 'result' : 'result2').innerText;
      const printWindow = window.open('', '', 'height=600,width=800');
      printWindow.document.write('<pre>' + content + '</pre>');
      printWindow.document.close();
      printWindow.print();
    }

    function saveToLocal(resultId) {
      const result = document.getElementById(resultId).innerText;
      if (result) {
        localStorage.setItem(resultId, result);
        alert('Saved to browser storage.');
      }
    }
  </script>
</body>
</html>
