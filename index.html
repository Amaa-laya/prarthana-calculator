<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NSB Savings Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #000 }
    .container { background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,.1); max-width: 900px; width: 100% }
    h2 { text-align: center; margin-bottom: 20px; color: #f58220 }
    .language-selector { display: flex; justify-content: flex-end; margin-bottom: 10px }
    .tabs { display: flex; justify-content: center; margin-bottom: 20px; flex-wrap: wrap }
    .tab { padding: 10px 20px; cursor: pointer; background: #e0e0e0; margin: 5px; border-radius: 8px; color: #000; user-select: none }
    .tab.active { background: #f58220; color: #fff }
    .tab-content { display: none }
    .tab-content.active { display: block }
    form { border: 2px solid #f58220; padding: 20px; border-radius: 12px; margin-bottom: 20px; background: #fff }
    label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 14px }
    input, select { width: 100%; padding: 10px; margin-bottom: 15px; border: 2px solid #f58220; border-radius: 8px; font-size: 16px; box-sizing: border-box; color: #000 }
    input:focus, select:focus { outline: 3px solid #f58220 }
    button { padding: 10px 15px; background: #f58220; color: #fff; border: none; border-radius: 5px; cursor: pointer; margin: 8px 8px 0 0; font-weight: 600; font-size: 15px; display: inline-flex; align-items: center; gap: 6px }
    #result, #result2 { margin-top: 20px; font-size: 18px; color: #1976d2; font-weight: bold; white-space: pre-wrap }
    .sidebar { position: fixed; left: -250px; top: 0; height: 100%; width: 250px; background: #f58220; transition: left .3s ease; padding-top: 60px; z-index: 1000; color: #fff; font-weight: bold }
    .sidebar.open { left: 0 }
    .sidebar a { display: block; padding: 15px 20px; text-decoration: none; color: #fff; font-size: 16px }
    .sidebar a:hover { background: #e06d0f }
    .hamburger { position: fixed; top: 20px; left: 20px; font-size: 30px; cursor: pointer; z-index: 1100; color: #f58220; background: #fff; border-radius: 8px; padding: 5px 10px; box-shadow: 0 2px 10px rgba(0,0,0,.1) }
  </style>
</head>
<body>
<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
<div id="sidebar" class="sidebar">
  <a href="#" onclick="loadCalculator('prarthana');closeSidebar();">Prarthana</a>
  <a href="#" onclick="loadCalculator('reality');closeSidebar();">Reality</a>
</div>
<div class="container">
  <div class="language-selector">
    <select class="language" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>
  </div>
  <h2 id="main-title">NSB Prarthana Savings Calculator</h2>
  <div class="tabs">
    <div class="tab active" onclick="showTab(event,'required')">ü™ô Required Deposit</div>
    <div class="tab" onclick="showTab(event,'maturity')">üí∞ Maturity Value</div>
  </div>

  <!-- Required Deposit Tab -->
  <div id="required" class="tab-content active">
    <form id="formRequired" onsubmit="event.preventDefault();calculateRequired();">
      <label for="openingDate">Opening Date:</label>
      <input type="date" id="openingDate" required>
      <label for="period">Period:</label>
      <select id="period" required onchange="updateDate('openingDate','period','maturityDate')">
        <option value="3">3 years</option>
        <option value="5">5 years</option>
        <option value="10">10 years</option>
        <option value="15">15 years</option>
        <option value="20">20 years</option>
      </select>
      <label for="maturityDate">Maturity Date:</label>
      <input type="date" id="maturityDate" disabled>
      <label id="targetLabel" for="expectedAmount">Target Maturity Amount (LKR):</label>
      <input type="number" id="expectedAmount" required>
      <label for="interestRate">Interest Rate (% per year):</label>
      <input type="number" id="interestRate" step="0.01" required>
      <button type="submit">üßÆ Calculate</button>
      <button type="button" onclick="clearAll()">üßπ Clear</button>
      <button type="button" onclick="printResult('result')">üñ®Ô∏è Print</button>
      <button type="button" onclick="emailResult('result')">üìß Email</button>
    </form>
    <div id="result"></div>
  </div>

  <!-- Maturity Value Tab -->
  <div id="maturity" class="tab-content">
    <form id="formMaturity" onsubmit="event.preventDefault();calculateMaturity();">
      <label for="openingDate2">Opening Date:</label>
      <input type="date" id="openingDate2" required>
      <label for="period2">Period:</label>
      <select id="period2" required onchange="updateDate('openingDate2','period2','maturityDate2')">
        <option value="12">12 months</option>
        <option value="24">24 months</option>
        <option value="36">36 months</option>
        <option value="48">48 months</option>
        <option value="60">60 months</option>
      </select>
      <label for="maturityDate2">Maturity Date:</label>
      <input type="date" id="maturityDate2" disabled>
      <label id="amountLabel" for="amountInput">Monthly Installment (LKR):</label>
      <input type="number" id="amountInput" required>
      <label for="interestRate2">Interest Rate (% per year):</label>
      <input type="number" id="interestRate2" step="0.01" required>
      <button type="submit">üßÆ Calculate</button>
      <button type="button" onclick="clearAll()">üßπ Clear</button>
      <button type="button" onclick="printResult('result2')">üñ®Ô∏è Print</button>
      <button type="button" onclick="emailResult('result2')">üìß Email</button>
    </form>
    <div id="result2"></div>
  </div>
</div>

<script>
function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("open");
}
function closeSidebar() {
  document.getElementById("sidebar").classList.remove("open");
}
function showTab(e, tabId) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  if (e) e.currentTarget.classList.add('active');
}
function updateDate(openId, periodId, maturityId) {
  const start = document.getElementById(openId).value;
  const val = parseInt(document.getElementById(periodId).value);
  if (start) {
    let date = new Date(start);
    if (periodId === 'period') date.setFullYear(date.getFullYear() + val);
    else date.setMonth(date.getMonth() + val);
    document.getElementById(maturityId).value = date.toISOString().split('T')[0];
  }
}
function calculateRequired() {
  const A = parseFloat(document.getElementById("expectedAmount").value);
  const r = parseFloat(document.getElementById("interestRate").value) / 100;
  const t = parseInt(document.getElementById("period").value);
  let P = A;
  for (let i = 0; i < t; i++) P = P / (1 + r);
  const result = `To receive LKR ${A.toFixed(2)} in ${t} years at ${r*100}% interest, deposit LKR ${P.toFixed(2)} today.`;
  document.getElementById("result").textContent = result;
  speak(result);
}
function calculateMaturity() {
  const P = parseFloat(document.getElementById("amountInput").value);
  const r = parseFloat(document.getElementById("interestRate2").value) / 100;
  const n = parseInt(document.getElementById("period2").value);
  let total = 0;
  const monthlyRate = r / 12;
  for (let i = 0; i < n; i++) {
    total += P * Math.pow(1 + monthlyRate, n - i);
  }
  const result = `If you deposit LKR ${P.toFixed(2)} monthly for ${n} months at ${r*100}% annual interest, you will get LKR ${total.toFixed(2)}.`;
  document.getElementById("result2").textContent = result;
  speak(result);
}
function clearAll() {
  document.querySelectorAll("input[type='date'], input[type='number']").forEach(el => el.value = '');
  document.getElementById("result").textContent = '';
  document.getElementById("result2").textContent = '';
}
function printResult(id) {
  const text = document.getElementById(id).textContent;
  if (!text) return alert("Nothing to print.");
  const w = window.open();
  w.document.write(`<pre>${text}</pre>`);
  w.print();
  w.close();
}
function emailResult(id) {
  const content = document.getElementById(id).textContent;
  if (!content) return alert('Nothing to email.');
  const subject = encodeURIComponent('NSB Savings Calculation Result');
  const body = encodeURIComponent(content);
  window.location.href = `mailto:?subject=${subject}&body=${body}`;
}
function speak(text) {
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = document.querySelector('.language').value === 'si' ? 'si-LK' : document.querySelector('.language').value === 'ta' ? 'ta-IN' : 'en-US';
  speechSynthesis.cancel();
  speechSynthesis.speak(msg);
}
function changeLanguage() {
  speak(document.querySelector('.tab.active')?.textContent || 'NSB Savings Calculator');
}
function loadCalculator(type) {
  document.getElementById("main-title").textContent = type === 'reality' ? "NSB Reality Savings Calculator" : "NSB Prarthana Savings Calculator";
  showTab(null, 'required');
  document.querySelectorAll("#period option").forEach((el, i) => el.selected = false);
  document.querySelectorAll("#period2 option").forEach((el, i) => el.selected = false);
  clearAll();
  speak(document.getElementById("main-title").textContent);
}
</script>
</body>
</html>
